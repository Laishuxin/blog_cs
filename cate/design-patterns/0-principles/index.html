<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计模式 - 设计原则 | Ru Shui</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog_cs/assets/img/logo.png">
    <link rel="manifest" href="/blog_cs/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="To Build Amazing Things !">
    <meta property="og:url" content="/blog_cs/cate/design-patterns/0-principles.html">
    <meta property="og:site_name" content="Ru Shui">
    <meta property="og:title" content="设计模式 - 设计原则">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Ru Shui">
    <meta property="article:author" content="ru shui">
    <meta property="article:tag" content="design pattern">
    <meta property="article:published_time" content="2021-05-14T00:00:00.000Z">
    <meta name="keywords" content="backend computer science">
    <meta name="author" content="ru shui">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/blog_cs/assets/css/0.styles.c0f28275.css" as="style"><link rel="preload" href="/blog_cs/assets/js/app.16bd55a2.js" as="script"><link rel="preload" href="/blog_cs/assets/js/layout-Layout.05aaa927.js" as="script"><link rel="preload" href="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.4b319992.js" as="script"><link rel="preload" href="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.4e62ce68.js" as="script"><link rel="preload" href="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout.6d1cfc91.js" as="script"><link rel="preload" href="/blog_cs/assets/js/page-设计模式-设计原则.bbb33c17.js" as="script"><link rel="prefetch" href="/blog_cs/assets/js/44.d134d706.js"><link rel="prefetch" href="/blog_cs/assets/js/45.eef8e3be.js"><link rel="prefetch" href="/blog_cs/assets/js/46.cfe5b283.js"><link rel="prefetch" href="/blog_cs/assets/js/47.46ba4682.js"><link rel="prefetch" href="/blog_cs/assets/js/48.2d7eb269.js"><link rel="prefetch" href="/blog_cs/assets/js/layout-Blog.286edd81.js"><link rel="prefetch" href="/blog_cs/assets/js/layout-NotFound.d696089a.js"><link rel="prefetch" href="/blog_cs/assets/js/layout-Slide.2ea672bd.js"><link rel="prefetch" href="/blog_cs/assets/js/page--38ab1f94.0ee91aa9.js"><link rel="prefetch" href="/blog_cs/assets/js/page--5e8d4d74.d527bf01.js"><link rel="prefetch" href="/blog_cs/assets/js/page--604125d4.98b6061f.js"><link rel="prefetch" href="/blog_cs/assets/js/page--aebf9a98.4de74a90.js"><link rel="prefetch" href="/blog_cs/assets/js/page--c12d42ec.320d7a0a.js"><link rel="prefetch" href="/blog_cs/assets/js/page-InformationStorage.4384310d.js"><link rel="prefetch" href="/blog_cs/assets/js/page-IntegerRepresentations.b0b42886.js"><link rel="prefetch" href="/blog_cs/assets/js/page-about.d3bf3112.js"><link rel="prefetch" href="/blog_cs/assets/js/page-csapp.fe293514.js"><link rel="prefetch" href="/blog_cs/assets/js/page-分类.c2ac9436.js"><link rel="prefetch" href="/blog_cs/assets/js/page-数据结构与算法-二分.2da042c8.js"><link rel="prefetch" href="/blog_cs/assets/js/page-数据结构与算法-前缀和和差分.5ec19ad9.js"><link rel="prefetch" href="/blog_cs/assets/js/page-数据结构与算法-排序.2e430056.js"><link rel="prefetch" href="/blog_cs/assets/js/page-数据结构与算法-高精度算法.8654db28.js"><link rel="prefetch" href="/blog_cs/assets/js/page-数据结构与算法.167704e2.js"><link rel="prefetch" href="/blog_cs/assets/js/page-计算机网络-http.ccef104d.js"><link rel="prefetch" href="/blog_cs/assets/js/page-计算机网络-传输层.940184bb.js"><link rel="prefetch" href="/blog_cs/assets/js/page-计算机网络-链路层.97d0e551.js"><link rel="prefetch" href="/blog_cs/assets/js/page-计算机网络.a73822f1.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-单例模式.ae87fd95.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-原型模式.e73be0f1.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-工厂模式.f81efa2f.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-建造者模式（生成器模式）.b000530b.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-模板模式.b6b4708a.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-策略模式.7bdc8213.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-组合模式.3aa54ac1.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-装饰者模式.7887cd58.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-观察者模式.62b37d84.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-迭代器模式.5a74e9b0.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式-适配器模式.970d96e8.js"><link rel="prefetch" href="/blog_cs/assets/js/page-设计模式.28e3cb91.js"><link rel="prefetch" href="/blog_cs/assets/js/page-首页.a1e93793.js"><link rel="prefetch" href="/blog_cs/assets/js/vendors~photo-swipe.c256e8d9.js"><link rel="prefetch" href="/blog_cs/assets/js/vendors~reveal.58127042.js">
    <link rel="stylesheet" href="/blog_cs/assets/css/0.styles.c0f28275.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/blog_cs/" class="home-link router-link-active"><img src="/blog_cs/assets/img/logo.png" alt="Ru Shui" class="logo"> <!----> <span class="site-name can-hide">Ru Shui</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="switch"><input id="switch" type="checkbox" checked="checked" class="switch-input"> <label for="switch" class="label"><span class="label-content"></span></label></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_cs/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><a href="/blog_cs/category/" class="nav-link"><!---->
  分类
</a></div><div class="nav-item"><a href="/blog_cs/tag/" class="nav-link"><!---->
  标签
</a></div><div class="nav-item"><a href="/blog_cs/timeline/" class="nav-link"><!---->
  归档
</a></div><div class="nav-item"><a href="/blog_cs/about/" class="nav-link"><!---->
  关于
</a></div></nav> <!----> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info"><div data-balloon-pos="" class="blogger"><img property="image" alt="Blogger Avatar" src="/blog_cs/assets/img/logo.png" class="avatar"> <div property="name" class="name">ru shui</div> <!----></div> <div class="num-wrapper"><div><div class="num">26</div> <div>Articles</div></div> <div><div class="num">7</div> <div>Category</div></div> <div><div class="num">18</div> <div>Tags</div></div> <div><div class="num">26</div> <div>Timeline</div></div></div> <!----></div> <hr>  <nav class="sidebar-nav-links"><div class="nav-item"><a href="/blog_cs/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><a href="/blog_cs/category/" class="nav-link"><!---->
  分类
</a></div><div class="nav-item"><a href="/blog_cs/tag/" class="nav-link"><!---->
  标签
</a></div><div class="nav-item"><a href="/blog_cs/timeline/" class="nav-link"><!---->
  归档
</a></div><div class="nav-item"><a href="/blog_cs/about/" class="nav-link"><!---->
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog_cs/cate/design-patterns/0-principles/" aria-current="page" class="active sidebar-link">设计模式 - 设计原则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#单一职责原则" class="sidebar-link">单一职责原则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#introduction" class="sidebar-link heading3">introduction</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#implementation" class="sidebar-link heading3">implementation</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#precautions" class="sidebar-link heading3">precautions</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#接口隔离原则" class="sidebar-link">接口隔离原则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#introduction-2" class="sidebar-link heading3">introduction</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#implementation-2" class="sidebar-link heading3">implementation</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#comparison-2" class="sidebar-link heading3">comparison</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#依赖倒置原则" class="sidebar-link">依赖倒置原则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#示例" class="sidebar-link heading3">示例</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#实现依赖倒置的方式" class="sidebar-link heading3">实现依赖倒置的方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#里氏替换原则" class="sidebar-link">里氏替换原则</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#开放封闭原则-ocp" class="sidebar-link">开放封闭原则（OCP）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#示例-2" class="sidebar-link heading3">示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#迪米特法则" class="sidebar-link">迪米特法则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#示例-3" class="sidebar-link heading3">示例</a></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#注意事项和细节" class="sidebar-link heading3">注意事项和细节</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_cs/cate/design-patterns/0-principles/#合成复用原则" class="sidebar-link">合成复用原则</a></li></ul></li><li><a href="/blog_cs/cate/design-patterns/1-strategy/" class="sidebar-link">设计模式 - 策略模式</a></li><li><a href="/blog_cs/cate/design-patterns/14-be-template/" class="sidebar-link">设计模式 - 模板模式</a></li><li><a href="/blog_cs/cate/design-patterns/2-observer/" class="sidebar-link">设计模式 - 观察者模式</a></li><li><a href="/blog_cs/cate/design-patterns/3-factory/" class="sidebar-link">设计模式 - 工厂模式</a></li><li><a href="/blog_cs/cate/design-patterns/4-cm-singleton/" class="sidebar-link">设计模式 - 单例模式</a></li><li><a href="/blog_cs/cate/design-patterns/5-cm-prototype/" class="sidebar-link">设计模式 - 原型模式</a></li><li><a href="/blog_cs/cate/design-patterns/6-cm-builder/" class="sidebar-link">设计模式 - 建造者模式（生成器模式）</a></li><li><a href="/blog_cs/cate/design-patterns/7-st-adapter/" class="sidebar-link">设计模式 - 适配器模式</a></li><li><a href="/blog_cs/cate/design-patterns/9-st-decoration/" class="sidebar-link">设计模式 - 装饰者模式</a></li></ul> </aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/blog_cs/cate/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">分类</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/blog_cs/cate/design-patterns/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">设计模式</span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/blog_cs/cate/design-patterns/0-principles/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">设计模式 - 设计原则</span></a> <meta property="position" content="3"></li></ol></nav>  <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">设计模式 - 设计原则</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">ru shui</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-05-14 </span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">Design patterns</span></span><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">Design pattern</span></li> <meta property="keywords" content="Design pattern"></ul></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 12 min</span> <meta property="timeRequired" content="PT12M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#单一职责原则" class="anchor-link heading2"><div>单一职责原则</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#introduction" class="anchor-link heading3"><div>introduction</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#implementation" class="anchor-link heading3"><div>implementation</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#precautions" class="anchor-link heading3"><div>precautions</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#接口隔离原则" class="anchor-link heading2"><div>接口隔离原则</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#introduction-2" class="anchor-link heading3"><div>introduction</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#implementation-2" class="anchor-link heading3"><div>implementation</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#comparison-2" class="anchor-link heading3"><div>comparison</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#依赖倒置原则" class="anchor-link heading2"><div>依赖倒置原则</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#示例" class="anchor-link heading3"><div>示例</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#实现依赖倒置的方式" class="anchor-link heading3"><div>实现依赖倒置的方式</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#里氏替换原则" class="anchor-link heading2"><div>里氏替换原则</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#开放封闭原则-ocp" class="anchor-link heading2"><div>开放封闭原则（OCP）</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#示例-2" class="anchor-link heading3"><div>示例</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#迪米特法则" class="anchor-link heading2"><div>迪米特法则</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#示例-3" class="anchor-link heading3"><div>示例</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#注意事项和细节" class="anchor-link heading3"><div>注意事项和细节</div></a></li><li class="anchor"><a href="/blog_cs/cate/design-patterns/0-principles/#合成复用原则" class="anchor-link heading2"><div>合成复用原则</div></a></li></ul></div></aside></div> <div class="theme-default-content content__default"><p>设计模式的七大设计原则：</p> <ol><li>单一职责原则</li> <li>接口隔离原则</li> <li>依赖倒置原则</li> <li>里氏替换原则</li> <li>开放封闭原则（OCP）</li> <li>迪米特法则</li> <li>合成复用原则</li></ol> <h2 id="单一职责原则"><a href="#单一职责原则" class="header-anchor">#</a> 单一职责原则</h2> <blockquote><p>单一职责原则要求：对于类而言，单一职责要求一个类只负责一项职责。
如果类 A 负责两个不同的职责，如：职责 1 和职责 2。
当职责 1 需求改变时改变类 A，可能会造成职责 2 执行错误，
这种情况下就违法了单一职责原则。
所以我们需要把类 A 的分解为 A1， A2，分别负责不同的职责。</p></blockquote> <p>对于函数也类似。</p> <h3 id="introduction"><a href="#introduction" class="header-anchor">#</a> introduction</h3> <p>上面的说法可能有些抽象，让我们从具体的例子中体验一下这一原则。</p> <p>需求：</p> <ol><li>我们使用不同的交通工具出行。</li> <li>需要有时间限制。</li></ol> <h3 id="implementation"><a href="#implementation" class="header-anchor">#</a> implementation</h3> <h4 id="tradition"><a href="#tradition" class="header-anchor">#</a> tradition</h4> <p>我们先来实现第一个功能：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token keyword">type</span>
  <span class="token punctuation">}</span>

  <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>从上面的例子上看，我们实现一个交通工具类 (<code>Vehicle</code>)，让
它执行一个 <code>operate</code> 方法，来现象出行。</p> <p>接下来，我们来实现第二个功能：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code>  <span class="token function">operate</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token constant">LIMIT</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token constant">LIMIT</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下面就开启我们的出行之旅：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token string">'car'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> train <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token string">'train'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> plane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vehicle</span><span class="token punctuation">(</span><span class="token string">'plane'</span><span class="token punctuation">)</span>

  car<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  train<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
  plane<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>从实现上面看，汽车 (car) 和火车 (train) 会跑，这显然没有问题。
但是，飞机 (plane) 也会跑这显然就离谱了。
其次就是每次我们修改 <code>LIMIT</code>，对所有的出行工具都有影响。
但是，我们想对不同的工具进行不同的时间限制，如果从
上面的代码进行修改，我们得使用到很多的 <code>if else</code> 判断
才能实现。</p> <p>显然，我们这样的设计是有缺陷的，也就是违反了<strong>单一设计原则</strong>。</p> <h4 id="design-pattern"><a href="#design-pattern" class="header-anchor">#</a> design pattern</h4> <p>接下来，我们使用更好的设计（只是单纯演示，并没有使用具体的
设计模式），来实现上面的功能。</p> <p>首先，我们通过类层面实现：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token keyword">type</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">abstract</span> <span class="token function">operate</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">RunnableVehicle</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">operate</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SwimmableVehicle</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">operate</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is swimming...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">FlyableVehicle</span> <span class="token keyword">extends</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token function">operate</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is flying...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>我们将 <code>Vehicle</code> 类进行抽象，同时创建三个具体的类。
每个类只负责单一的职责。通过这样的修改后，我们再去
修改时间限制就不会影响到其他类了。</p> <p>接下来我们再从方法层面实现：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Vehicle</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">=</span> <span class="token keyword">type</span>
  <span class="token punctuation">}</span>

  <span class="token function">run</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is running...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">fly</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is flying...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">swim</span><span class="token punctuation">(</span>start<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> end <span class="token operator">-</span> start
    <span class="token keyword">if</span> <span class="token punctuation">(</span>interval <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">type</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is swimming...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">out of time...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="comparison"><a href="#comparison" class="header-anchor">#</a> comparison</h4> <p>通过比较上面两种实现方式，我们可以更好地理解
单一职责原则。利用这一原则，有利于我们后续对
代码的修改和维护。</p> <h3 id="precautions"><a href="#precautions" class="header-anchor">#</a> precautions</h3> <p>单一职责原则要求我们：</p> <ol><li>降低类的复杂度，一个类只负责一项职责。</li> <li>提高类的可读性、可维护性。</li> <li>降低变化而引起的风险。</li> <li>通常情况下，我们应当遵守单一职责原则。只有当
逻辑组够简单的时候，才可以在代码级违反单一职责原则。
只有类中方法数量组够少，才可以在方法层面上保持
单一职责原则。</li></ol> <h2 id="接口隔离原则"><a href="#接口隔离原则" class="header-anchor">#</a> 接口隔离原则</h2> <blockquote><p>接口隔离原则要求：客户端不应该依赖它不需要的接口。即，
一个类对另一个类的依赖应该建立在<strong>最小</strong>接口上的。</p></blockquote> <p>要讲清楚其中的利弊，还是让我们通过一个简单的例子说明。</p> <h3 id="introduction-2"><a href="#introduction-2" class="header-anchor">#</a> introduction</h3> <p><img src="/blog_cs/assets/img/2021-06-15-13-04-34.158f51f5.png" alt=""></p> <p>现在我们有一个 <code>Enjoyable</code> 接口。分别有两种实现方式 <code>Senior</code> 和 <code>Advance</code>。</p> <p>我们的 <code>Boss</code> 通过 <code>Enjoyable</code> 接口，依赖了 <code>Advance</code> 中的 <code>dancing</code>, <code>massaging</code>, <code>sleeping</code> 三个方法。</p> <p>我们的 <code>Employee</code> 通过 <code>Enjoyable</code> 接口，依赖了 <code>Senior</code> 中的 <code>playing</code>, <code>sleeping</code>, <code>singing</code> 方法。</p> <h3 id="implementation-2"><a href="#implementation-2" class="header-anchor">#</a> implementation</h3> <h4 id="tradition-2"><a href="#tradition-2" class="header-anchor">#</a> tradition</h4> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Enjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">singing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">massaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">playing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Advance</span> <span class="token keyword">implements</span> <span class="token class-name">Enjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">singing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Advanced singing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">massaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Advanced massaging...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Advanced dancing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Advanced sleeping...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">playing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Advanced playing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Senior</span> <span class="token keyword">implements</span> <span class="token class-name">Enjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">singing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Senior singing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">massaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Senior massaging...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Senior dancing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Senior sleeping...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">playing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Senior playing...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Boss</span> <span class="token punctuation">{</span>
  <span class="token function">enjoy</span><span class="token punctuation">(</span>activities<span class="token operator">:</span> Enjoyable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    activities<span class="token punctuation">.</span><span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    activities<span class="token punctuation">.</span><span class="token function">massaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    activities<span class="token punctuation">.</span><span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
  <span class="token function">enjoy</span><span class="token punctuation">(</span>activities<span class="token operator">:</span> Enjoyable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    activities<span class="token punctuation">.</span><span class="token function">playing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    activities<span class="token punctuation">.</span><span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    activities<span class="token punctuation">.</span><span class="token function">singing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>上面的实现方式存在一个问题。就是 <code>Boss</code> 和 <code>Employee</code> 依赖了多余的方法。
对于 <code>Boss</code> 来讲，<code>Enjoyable</code> 中的 <code>playing</code> 和 <code>singing</code> 是用不到的。
对于 <code>Employee</code> 来讲，<code>Enjoyable</code> 中的 <code>massaging</code> 和 <code>dancing</code> 是用不到的。</p> <p>这种实现方式违反了接口隔离原则。正确的做法是讲 <code>Enjoyable</code> 接口分割成几个接口，
然后让实现类按需实现接口。</p> <h4 id="design-pattern-2"><a href="#design-pattern-2" class="header-anchor">#</a> design pattern</h4> <p>为了解决上面的问题，我们需要将 <code>Enjoyable</code> 这个范围太大的接口拆分成若干个小的接口。
然后提取公共部分，对于不相同的部分，我们逐个实现。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CommonEnjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">sleeping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">AdvancedEnjoyable</span> <span class="token keyword">extends</span> <span class="token class-name">CommonEnjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">massaging</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">dancing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">SeniorEnjoyable</span> <span class="token keyword">extends</span> <span class="token class-name">CommonEnjoyable</span> <span class="token punctuation">{</span>
  <span class="token function">playing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">singing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>剩下的操作就是将代码中冗余的部分删除即可。</p> <h3 id="comparison-2"><a href="#comparison-2" class="header-anchor">#</a> comparison</h3> <p>两种实现方式进行比较我们可以得出，使用接口隔离的方式我们可以
明确各部分代码的职责，可以避免在实现类中存在冗余的代码。</p> <h2 id="依赖倒置原则"><a href="#依赖倒置原则" class="header-anchor">#</a> 依赖倒置原则</h2> <p>在软件编程中，低层模块尽量要依赖抽象类或者接口，才能使程序稳定性更好。
这样做我们的变量引用和实际对象间，就存在一个缓存层，便于后续的拓展和优化。</p> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Email</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hello person'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token function">receive</span><span class="token punctuation">(</span>email<span class="token operator">:</span> Email<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'receive message: '</span><span class="token punctuation">,</span> email<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="data:image/png;base64,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" alt=""></p> <p>从上面的例子我们可以看到，<code>Person</code> 直接依赖 <code>Email</code>，这样一来，
如果我们想要接收的不是 <code>Email</code> 信息。那么，我们还需要修改这两个类的
代码。</p> <p>我们再将上面的代码采用 依赖倒置的原则进行实现：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IReceive</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token operator">:</span> Message<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IMessage</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">IReceive</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token operator">:</span> IMessage<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'receive message: '</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Email</span> <span class="token keyword">implements</span> <span class="token class-name">IMessage</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'email message'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">WeiChat</span> <span class="token keyword">implements</span> <span class="token class-name">IMessage</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'wechat message'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>我们创建两个接口 <code>IReceive</code> 和 <code>IMessage</code> 对原先的具体类
进行抽象，具体类实现抽象类，从而将依赖分离。
那么为什么这个原则称之为<strong>依赖倒置原则</strong>呢？
来看我们实现后的类图：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>可以看到上层类 <code>Person</code> 对于下层类 <code>Email</code> 和 <code>Wechat</code> 的依赖呈现倒置
的情况。这样做的好处在于
<strong>我们对于上层类和下层类都有很好的扩展性</strong>，而且修改其中一部分的代码不会直接
影响到另一个类的实现。</p> <h3 id="实现依赖倒置的方式"><a href="#实现依赖倒置的方式" class="header-anchor">#</a> 实现依赖倒置的方式</h3> <p>实现依赖倒置有三种方式：</p> <ol><li>使用接口代替具体类。
上面的例子就是基于这个方式实现的。</li> <li>构造器方式实现。</li> <li><code>setter</code> 实现。</li></ol> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 构造函数实现。</span>
<span class="token keyword">interface</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">{</span>
  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IMessage</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> message<span class="token operator">:</span> IMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'receive message: '</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">{</span>
  <span class="token function">setMessage</span><span class="token punctuation">(</span>message<span class="token operator">:</span> IMessage<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">IMessage</span> <span class="token punctuation">{</span>
  <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">IReceiver</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> message<span class="token operator">!</span><span class="token operator">:</span> IMessage
  <span class="token function">setMessage</span><span class="token punctuation">(</span>message<span class="token operator">:</span> IMessage<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message
  <span class="token punctuation">}</span>

  <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'receive message: '</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>和使用构造函数类似，我们为具体类内部提供一个属性 <code>message</code>，
然后使用一个 <code>setMessage</code> 利用接口设置 <code>message</code>。</p> <p><strong>值得注意的是</strong>，我们在使用 <code>message</code> 之前需要确保 <code>message</code> 存在，
不然会出现一个引用错误。</p> <h2 id="里氏替换原则"><a href="#里氏替换原则" class="header-anchor">#</a> 里氏替换原则</h2> <p>使用组合和聚合代替继承。</p> <h2 id="开放封闭原则-ocp"><a href="#开放封闭原则-ocp" class="header-anchor">#</a> 开放封闭原则（OCP）</h2> <p>开闭原则是编程中最基础、最重要的设计原则。</p> <p>开闭原则要求软件实体类，<strong>模块和函数应该对扩展开放（对接口的提供方），对修改关闭（对使用一方）</strong>。用抽象构建框架，用实现拓展内容。</p> <p>当软件需求发生变化的时候，尽量通过拓展软件实体类的行为来实现，而不是修改原有的代码。</p> <p>在软件编程中，使用设计模式的最终目的就是为了实现开闭原则。</p> <h3 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h3> <p>在使用开闭原则之前，让我们来看一个错误的示范：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> ShapeType <span class="token punctuation">{</span>
  circle<span class="token punctuation">,</span>
  triangle<span class="token punctuation">,</span>
  rectangle<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token comment">// constructor(protected type: ShapeType) {}</span>
  <span class="token keyword">protected</span> _type<span class="token operator">!</span><span class="token operator">:</span> ShapeType

  <span class="token keyword">get</span> <span class="token keyword">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_type
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>triangle
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>triangle
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>circle
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shape<span class="token punctuation">.</span><span class="token keyword">type</span>
    <span class="token class-name"><span class="token keyword">if</span></span> <span class="token punctuation">(</span><span class="token keyword">type</span> <span class="token operator">===</span> ShapeType<span class="token punctuation">.</span>circle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">type</span> <span class="token operator">===</span> ShapeType<span class="token punctuation">.</span>rectangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawRectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">type</span> <span class="token operator">===</span> ShapeType<span class="token punctuation">.</span>triangle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">drawTriangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a circle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">drawTriangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a triangle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">drawRectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a rectangle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>在上面的代码中，提供者为 <code>Shape</code>，而使用者为 <code>Graph</code>。但是
我们并没有对 <code>Graph</code> 修改封闭，这是为什么呢？</p> <p>例如：我们现在想增加一个 <code>Square</code> 的 <code>Shape</code> 实现类，
这时候我们就需要修改 <code>Graph</code> 中的代码，以便让其支持我们
新增的 <code>Square</code>，这样做的后果就是我们需要在 <code>Graph</code> 中
添加一个分支语句，同时添加一个 <code>drawSquare</code> 的方法，这就
违反了开闭原则。</p> <p>下面我们就使用抽象来修改我们上面的代码：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token comment">// constructor(protected type: ShapeType) {}</span>
  <span class="token keyword">protected</span> _type<span class="token operator">!</span><span class="token operator">:</span> ShapeType
  <span class="token keyword">get</span> <span class="token keyword">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_type
  <span class="token punctuation">}</span>
  <span class="token keyword">abstract</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>circle
  <span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a circle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>rectangle
  <span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a rectangle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Triangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_type <span class="token operator">=</span> ShapeType<span class="token punctuation">.</span>triangle
  <span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'drawing a triangle...'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>shape<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>我们在 <code>Shape</code> 中添加一个抽象的方法 <code>draw</code> 提供不同类型的子类
绘制方法。自己在继承 <code>Shape</code> 后定制化 <code>draw</code> 方法就能实现不同的
绘制方法。</p> <p>这样一来，我们在 <code>Graph</code> 的 <code>draw</code> 中，只需要调用 <code>shape</code> 的 <code>draw</code>
方法即可。通过的实现方式，我们可以看到代码中的分支语句被删除了，
同时，如果我们有新的类型需要增加的化，我们不用再修改 <code>Graph</code> 中的代码，
也就是说<strong>对于使用一方实现了修改关闭</strong>，同时对于提供一方（<code>Shape</code>）
实现了扩展开放。</p> <h2 id="迪米特法则"><a href="#迪米特法则" class="header-anchor">#</a> 迪米特法则</h2> <p>Dimeter 要求：<strong>一个对象应该对其他对象保持最少的了解。</strong></p> <p>迪米特法则又称最少知道原则，即一个类对自己依赖的类知道得越少越好(只知道公开的接口)。
也就是说，对于被依赖的类，不管有多么复杂，都尽量将逻辑封装在类的内部，对外除了提供
<code>public</code> 方法，只与<strong>直接朋友</strong>通信。</p> <p>类与类之间的耦合方式有很多种：依赖，关联，组合，聚合等。其中，我们称<strong>出现在成员变量，方法参数，方法返回值的类为直接朋友</strong>。
而出现在<strong>局部变量</strong>的类不是直接朋友。迪米特法则就是要求我们对于非直接朋友的类不要以局部变量的形式出现在类的内部，不然这样的耦合性会很高。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">B</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// 直接朋友。</span>
  <span class="token keyword">private</span> friend<span class="token operator">:</span> <span class="token constant">A</span>
  <span class="token function">m</span><span class="token punctuation">(</span>friend<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">A</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">// 非直接朋友。</span>
  <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a<span class="token operator">:</span> <span class="token constant">A</span> <span class="token comment">// 陌生类以局部变量的方式出现。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="示例-3"><a href="#示例-3" class="header-anchor">#</a> 示例</h3> <p>我们用两个 <code>Manager</code> 类来分别管理学校总部的员工 <code>SchoolEmployee</code> 和
下属学校的员工 <code>SubSchoolEmployee</code> 。
然后学校 <code>SchoolManager</code> 中展示学校所有的员工（包括学校总部和下属学校的员工）。</p> <p>错误示范：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/**
 * 学校总部员工。
 */</span>
<span class="token keyword">class</span> <span class="token class-name">SchoolEmployee</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id
  <span class="token punctuation">}</span>
  <span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id
  <span class="token punctuation">}</span>

  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">学校员工</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 下属学校员工。
 */</span>
<span class="token keyword">class</span> <span class="token class-name">SubSchoolEmployee</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id
  <span class="token punctuation">}</span>
  <span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id
  <span class="token punctuation">}</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">下属学校员工</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 下属学校管理。
 */</span>
<span class="token keyword">class</span> <span class="token class-name">SubSchoolManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> employees<span class="token operator">:</span> SubSchoolEmployee<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SubSchoolEmployee</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">getEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>employees
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SchoolManager</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> employees<span class="token operator">:</span> SchoolEmployee<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SchoolEmployee</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 获取学校总部员工。
   */</span>
  <span class="token function">getEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>employees
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * 展示所有的员工信息，包括学校总部和下属学校的员工信息。
   */</span>
  <span class="token function">showAllEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subSchoolManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubSchoolManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'学校总部员工：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'下属学校员工：'</span><span class="token punctuation">,</span> subSchoolManager<span class="token punctuation">.</span><span class="token function">getEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><p>上面代码中，属于 <code>SchoolManager</code> 的直接朋友有 <code>SchoolEmployee</code>。
属于非直接朋友有 <code>SubSchoolManager</code>。由于间接朋友的存在，类与类之间的耦合度
大大提高了，一旦 <code>SubSchoolManager</code> 中对于 <code>getEmployees</code> 的实现发生变化，
我们还得修改 <code>SchoolManager</code> 中的代码，这也违背了 OCP 原则。</p> <p>为了降低代码的耦合度，我们应该尽量避免在类中使用非直接朋友。
所以，我们可以做如下改进：
将 <code>SchoolManager</code> 中对于 <code>SubSchoolManager</code> 的依赖改用方法参数的方式传入，
同时，将获取展示下属学校员工的方法由具体的 <code>SubSchoolManager</code> 去实现。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">/**
 * 下属学校管理。
 */</span>
<span class="token keyword">class</span> <span class="token class-name">SubSchoolManager</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token function">showEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'下属学校员工：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>employees<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SchoolManager</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">showAllEmployees</span><span class="token punctuation">(</span>subSchoolManager<span class="token operator">:</span> SubSchoolManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'学校总部员工：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    subSchoolManager<span class="token punctuation">.</span><span class="token function">showEmployees</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="注意事项和细节"><a href="#注意事项和细节" class="header-anchor">#</a> 注意事项和细节</h3> <p>迪米特法则的核心是降低类之间的耦合度。
但是，由于每个类都减少了不必要的依赖，因此，迪米特法则知识要求降低类与类直接按的耦合关系，
并不是要求彼此完全没有耦合。</p> <h2 id="合成复用原则"><a href="#合成复用原则" class="header-anchor">#</a> 合成复用原则</h2> <p>尽量使用合成/聚合的方式，而不是直接使用继承。</p></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 10, 2021 10:16</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 15622971239@163.com" class="contributor">
          Laishuxin
        </span> , <span title="email: laishuxin170@gmail.com" class="contributor">
          laishuxin170
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog_cs/cate/design-patterns/1-strategy/">
        设计模式 - 策略模式
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> </main> <footer class="footer-wrapper"><!----> <div class="footer"><h2 style="width:100%; min-width: 100%;">Ru Shui</h2></div> <div class="copyright">MIT Licensed | Copyright © 2021-present Ru Shui</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/blog_cs/assets/js/app.16bd55a2.js" defer></script><script src="/blog_cs/assets/js/layout-Layout.05aaa927.js" defer></script><script src="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.4b319992.js" defer></script><script src="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.4e62ce68.js" defer></script><script src="/blog_cs/assets/js/vendors~layout-Blog~layout-Layout.6d1cfc91.js" defer></script><script src="/blog_cs/assets/js/page-设计模式-设计原则.bbb33c17.js" defer></script>
  </body>
</html>
